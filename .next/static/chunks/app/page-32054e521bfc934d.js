(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3414:function(){},172:function(){},2001:function(){},3779:function(){},2258:function(){},4137:function(e,t,a){Promise.resolve().then(a.bind(a,2775))},2775:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return f}});var n=a(7437),s=a(2265);function r(e){let{documentsCount:t}=e,[a,r]=(0,s.useState)(!1);return(0,n.jsxs)("header",{className:"bg-gradient-to-r from-indigo-600 via-purple-700 to-indigo-600 backdrop-blur-xl border-b border-white/20 sticky top-0 z-50 shadow-2xl relative overflow-hidden",children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent animate-pulse"}),(0,n.jsxs)("div",{className:"container-responsive relative z-10",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[(0,n.jsx)("div",{className:"h-16 w-auto flex items-center justify-center",children:(0,n.jsx)("img",{src:"/images/logocleniopdf.svg",alt:"Cl\xeanio PDF Editor",className:"h-full w-auto object-contain"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-lg sm:text-xl font-bold text-white",children:"F\xeanix PDF"}),(0,n.jsx)("p",{className:"text-xs text-blue-100 font-medium hidden sm:block",children:"Editor de PDF Profissional"})]})]}),(0,n.jsxs)("div",{className:"hidden md:flex items-center space-x-6",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-blue-100",children:[(0,n.jsx)("div",{className:"w-2 h-2 bg-green-300 rounded-full animate-pulse"}),(0,n.jsx)("span",{children:"Sistema Online"})]}),(0,n.jsxs)("div",{className:"text-sm text-blue-200",children:[t," documento",1!==t?"s":""," carregado",1!==t?"s":""]})]}),(0,n.jsx)("div",{className:"md:hidden",children:(0,n.jsx)("button",{onClick:()=>r(!a),className:"p-2 rounded-lg hover:bg-blue-500 transition-colors",children:(0,n.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})})]}),a&&(0,n.jsx)("div",{className:"md:hidden border-t border-slate-600 py-4",children:(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-slate-300",children:[(0,n.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),(0,n.jsx)("span",{children:"Sistema Online"})]}),(0,n.jsxs)("div",{className:"text-sm text-slate-400",children:[t," documento",1!==t?"s":""," carregado",1!==t?"s":""]})]})})]})]})}function o(){let e=new Date().getFullYear();return(0,n.jsx)("footer",{className:"bg-white/5 backdrop-blur-md border-t border-white/10 mt-auto",children:(0,n.jsx)("div",{className:"container-responsive",children:(0,n.jsx)("div",{className:"py-6",children:(0,n.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("div",{className:"w-8 h-8 flex items-center justify-center",children:(0,n.jsx)("img",{src:"/images/logoclenio.svg",alt:"Cl\xeanio Consultory AI",className:"w-full h-full object-contain"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-sm font-semibold text-white",children:"F\xeanix PDF"}),(0,n.jsx)("p",{className:"text-xs text-white/60",children:"Powered by Cl\xeanio Consultory AI"})]})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-white/60",children:[(0,n.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),(0,n.jsx)("span",{children:"Sistema Online • Vers\xe3o 1.0.0"})]}),(0,n.jsxs)("div",{className:"text-xs text-white/60",children:["\xa9 ",e," F\xeanix PDF. Todos os direitos reservados."]})]})})})})}var i=a(9067);class l{static async loadPDF(e){return new Promise((t,a)=>{let n=new FileReader;n.onload=async n=>{try{var s;let a=null===(s=n.target)||void 0===s?void 0:s.result;if(!a)throw Error("Erro ao ler arquivo");let r=await i.PDFDocument.load(a),o=[];for(let e=0;e<r.getPageCount();e++){let{width:t,height:a}=r.getPage(e).getSize();o.push({id:"page-".concat(Date.now(),"-").concat(e),index:e,rotation:0,textAnnotations:[],width:t,height:a})}let l={id:"doc-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),name:e.name,size:e.size,pages:o,file:e,pdfDoc:r};t(l)}catch(e){a(e)}},n.onerror=()=>a(Error("Erro ao ler arquivo")),n.readAsArrayBuffer(e)})}static addTextAnnotation(e,t,a,n,s){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o={...e};if(t>=0&&t<o.pages.length){let e=[...o.pages],i={...e[t]},l={id:"annotation-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),content:a,x:n,y:s,width:r.width||200,height:r.height||30,fontSize:r.fontSize||12,fontFamily:r.fontFamily||"Arial",color:r.color||"#000000"};i.textAnnotations=[...i.textAnnotations,l],e[t]=i,o.pages=e}return o}static updateTextAnnotation(e,t,a,n){let s={...e};if(t>=0&&t<s.pages.length){let e=[...s.pages],r={...e[t]};r.textAnnotations=r.textAnnotations.map(e=>e.id===a?{...e,...n}:e),e[t]=r,s.pages=e}return s}static removeTextAnnotation(e,t,a){let n={...e};if(t>=0&&t<n.pages.length){let e=[...n.pages],s={...e[t]};s.textAnnotations=s.textAnnotations.filter(e=>e.id!==a),e[t]=s,n.pages=e}return n}static rotatePage(e,t,a){let n={...e};if(t>=0&&t<n.pages.length){let e=[...n.pages],s={...e[t]};s.rotation=(s.rotation+a)%360,e[t]=s,n.pages=e}return n}static removePage(e,t){let a={...e};if(t>=0&&t<a.pages.length){let e=[...a.pages];e.splice(t,1),a.pages=e.map((e,t)=>({...e,index:t}))}return a}static reorderPages(e,t,a){let n={...e};if(t>=0&&t<n.pages.length&&a>=0&&a<n.pages.length){let e=[...n.pages],[s]=e.splice(t,1);e.splice(a,0,s),n.pages=e.map((e,t)=>({...e,index:t}))}return n}static movePageBetweenDocuments(e,t,a,n){if(a<0||a>=e.pages.length)return{sourceDocument:e,targetDocument:t};let s=[...e.pages],r=[...t.pages],[o]=s.splice(a,1);r.splice(n,0,o);let i=s.map((e,t)=>({...e,index:t})),l=r.map((e,t)=>({...e,index:t}));return{sourceDocument:{...e,pages:i},targetDocument:{...t,pages:l}}}static async generatePDF(e){try{let t=await i.PDFDocument.create();for(let a of e)if(a.pdfDoc){let e=a.pdfDoc.getPageCount();for(let n=0;n<e;n++){let[e]=await t.copyPages(a.pdfDoc,[n]);t.addPage(e);let s=a.pages[n];s&&0!==s.rotation&&t.getPage(t.getPageCount()-1).setRotation((0,i.degrees)(s.rotation))}}let a=await t.save(),n=new ArrayBuffer(a.length);return new Uint8Array(n).set(a),new Blob([n],{type:"application/pdf"})}catch(e){throw console.error("Erro ao gerar PDF:",e),Error("Erro ao gerar PDF final")}}static downloadPDF(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"documento-compilado.pdf",a=URL.createObjectURL(e),n=document.createElement("a");n.href=a,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(a)}static async generatePageThumbnail(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200;return"data:image/svg+xml;base64,".concat(btoa('\n      <svg width="'.concat(a,'" height="').concat(1.4*a,'" xmlns="http://www.w3.org/2000/svg">\n        <rect width="100%" height="100%" fill="#f3f4f6"/>\n        <text x="50%" y="50%" text-anchor="middle" fill="#6b7280" font-family="Arial" font-size="14">\n          P\xe1gina ').concat(t+1,"\n        </text>\n      </svg>\n    ")))}}function c(e){let{onFilesUploaded:t}=e,[a,r]=(0,s.useState)(!1),o=(0,s.useRef)(null),i=async e=>{e.target.files&&e.target.files.length>0&&await d(e.target.files)},c=async e=>{e.preventDefault(),r(!1),e.dataTransfer.files&&e.dataTransfer.files.length>0&&await d(e.dataTransfer.files)},d=async e=>{let a=Array.from(e).filter(e=>"application/pdf"===e.type);if(0!==a.length){try{let e=[];for(let t of a)try{let a=await l.loadPDF(t);e.push(a)}catch(e){console.error("Erro ao carregar ".concat(t.name,":"),e)}e.length>0&&t(e)}catch(e){console.error("Erro ao processar arquivos:",e)}o.current&&(o.current.value="")}};return(0,n.jsx)("div",{className:"w-full",children:(0,n.jsxs)("div",{className:"upload-area ".concat(a?"dragging":""),onDragOver:e=>{e.preventDefault(),r(!0)},onDragLeave:()=>{r(!1)},onDrop:c,onClick:()=>{o.current&&o.current.click()},children:[(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-100 to-indigo-100 rounded-xl flex items-center justify-center mb-3",children:(0,n.jsx)("svg",{className:"w-6 h-6 text-blue-600",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),(0,n.jsx)("h4",{className:"text-base font-semibold text-gray-800 mb-2",children:"Upload de PDFs"}),(0,n.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Clique para selecionar ou arraste arquivos PDF aqui"}),(0,n.jsxs)("div",{className:"flex items-center text-xs text-gray-500 bg-gray-100 px-3 py-1 rounded-full",children:[(0,n.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Formatos suportados: PDF"]})]}),(0,n.jsx)("input",{ref:o,type:"file",accept:".pdf",multiple:!0,onChange:i,className:"hidden"})]})})}var d=a(351),x=a(3651),h=a(5796);function u(e){let{annotation:t,onSave:a,onCancel:r,onDelete:o,currentTool:i}=e,[l,c]=(0,s.useState)(t.content),[d,x]=(0,s.useState)(t.fontSize||12),[h,u]=(0,s.useState)(t.fontFamily||"Arial"),[m,p]=(0,s.useState)(t.color||"#000000"),g=(0,s.useRef)(null);(0,s.useEffect)(()=>{g.current&&(g.current.focus(),g.current.select())},[]),(0,s.useEffect)(()=>{let e=e=>{e.target.closest(".text-editor-container")||r()};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[r]);let f=()=>{a({...t,content:l,fontSize:d,fontFamily:h,color:m})};return(0,n.jsx)("div",{className:"text-editor-container absolute bg-white border-2 border-blue-500 rounded-lg shadow-lg p-2 min-w-[200px] z-50",children:(0,n.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,n.jsxs)("div",{className:"flex space-x-2 text-xs",children:[(0,n.jsxs)("select",{value:h,onChange:e=>u(e.target.value),className:"px-2 py-1 border border-gray-300 rounded text-xs",children:[(0,n.jsx)("option",{value:"Arial",children:"Arial"}),(0,n.jsx)("option",{value:"Times New Roman",children:"Times New Roman"}),(0,n.jsx)("option",{value:"Courier New",children:"Courier New"}),(0,n.jsx)("option",{value:"Helvetica",children:"Helvetica"})]}),(0,n.jsxs)("select",{value:d,onChange:e=>x(Number(e.target.value)),className:"px-2 py-1 border border-gray-300 rounded text-xs",children:[(0,n.jsx)("option",{value:8,children:"8px"}),(0,n.jsx)("option",{value:10,children:"10px"}),(0,n.jsx)("option",{value:12,children:"12px"}),(0,n.jsx)("option",{value:14,children:"14px"}),(0,n.jsx)("option",{value:16,children:"16px"}),(0,n.jsx)("option",{value:18,children:"18px"}),(0,n.jsx)("option",{value:20,children:"20px"}),(0,n.jsx)("option",{value:24,children:"24px"})]}),(0,n.jsx)("input",{type:"color",value:m,onChange:e=>p(e.target.value),className:"w-8 h-6 border border-gray-300 rounded cursor-pointer",title:"Cor do texto"})]}),(0,n.jsx)("textarea",{ref:g,value:l,onChange:e=>c(e.target.value),onKeyDown:e=>{"Enter"===e.key&&e.ctrlKey?f():"Escape"===e.key&&r()},className:"w-full p-2 border border-gray-300 rounded text-sm resize-none",style:{fontFamily:h,fontSize:"".concat(d,"px"),color:m,minHeight:"60px"},placeholder:"edit"===i?"Digite o texto para editar...":"Digite seu texto aqui..."}),(0,n.jsxs)("div",{className:"flex justify-between space-x-2",children:[(0,n.jsxs)("div",{className:"flex space-x-1",children:[(0,n.jsx)("button",{onClick:f,className:"px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700",children:"Salvar (Ctrl+Enter)"}),(0,n.jsx)("button",{onClick:r,className:"px-3 py-1 bg-gray-500 text-white text-xs rounded hover:bg-gray-600",children:"Cancelar (Esc)"})]}),(0,n.jsx)("button",{onClick:o,className:"px-3 py-1 bg-red-600 text-white text-xs rounded hover:bg-red-700",title:"Excluir anota\xe7\xe3o",children:(0,n.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),(0,n.jsx)("div",{className:"text-xs text-gray-500 text-center",children:"Ctrl+Enter para salvar • Esc para cancelar"})]})})}function m(e){let{documents:t,currentTool:a,selectedPageIndex:r,onDocumentsUpdate:o}=e,[i,c]=(0,s.useState)(1),[d,m]=(0,s.useState)(0),[p,g]=(0,s.useState)(null),[f,v]=(0,s.useState)(null),[j,b]=(0,s.useState)(!1),[w,N]=(0,s.useState)(null),[y,k]=(0,s.useState)(1),[C,D]=(0,s.useState)(!1),[P,L]=(0,s.useState)(null);(0,s.useRef)(null),(0,s.useEffect)(()=>{let e=t.reduce((e,t)=>e+t.pages.length,0);if(m(e||0),0===e&&(c(1),g(null)),null!==r&&r<e&&c(r+1),t.length>0){let e=0;for(let a of t){if(null!==r&&r>=e&&r<e+a.pages.length){g(a);break}e+=a.pages.length}}},[t,r]);let F=e=>{"select"===a&&v(e)},S=e=>{if(!p||!w)return;let a=i-1,n=l.addTextAnnotation(p,a,e.content,w.x,w.y,{width:e.width,height:e.height,fontSize:e.fontSize,fontFamily:e.fontFamily,color:e.color});o(t.map(e=>e.id===p.id?n:e)),b(!1),N(null)},M=e=>{if(!p)return;let a=i-1,n=l.updateTextAnnotation(p,a,e.id,e);o(t.map(e=>e.id===p.id?n:e)),v(null)},E=()=>{if(!p||!f)return;let e=i-1,a=l.removeTextAnnotation(p,e,f.id);o(t.map(e=>e.id===p.id?a:e)),v(null)},A=e=>{if(console.log("Clique detectado:",{currentTool:a,isAddingText:j,editingAnnotation:f,target:e.target,currentTarget:e.currentTarget}),"text"!==a||j||f){if("edit"!==a||j||f||C)console.log("Clique ignorado:",{reason:"select"===a?"select tool active":"text"!==a&&"edit"!==a?"tool not text or edit":j?"already adding text":f?"already editing":"unknown"});else{e.preventDefault(),e.stopPropagation();let t=e.currentTarget.getBoundingClientRect(),a=e.clientX-t.left,n=e.clientY-t.top,s=document.querySelectorAll(".react-pdf__Page__textContent span"),r="",o=null;s.forEach(t=>{let s=t.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),l=s.left-i.left,c=s.top-i.top;a>=l&&a<=l+s.width&&n>=c&&n<=c+s.height&&(r=t.textContent||"",o={x:l,y:c,width:s.width,height:s.height})}),r&&o?(console.log("Texto detectado:",r),L({text:r,x:o.x,y:o.y,width:o.width,height:o.height}),D(!0)):(console.log("Nenhum texto detectado na posi\xe7\xe3o clicada"),alert("Nenhum texto detectado nesta posi\xe7\xe3o. Clique diretamente sobre o texto que deseja editar."))}}else{e.preventDefault(),e.stopPropagation();let t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.left,s=e.clientY-t.top,r=null==p?void 0:p.pages[i-1];if(r){let e=Math.min(800*y,.7*window.innerWidth),t=e*r.height/r.width,o=n/e*r.width,i=s/t*r.height;N({x:o,y:i,screenX:n,screenY:s}),b(!0),console.log("Clique para adicionar texto processado:",{tool:a,x:n,y:s,pdfX:o,pdfY:i,zoom:y,pdfWidth:e,pdfHeight:t,pageWidth:r.width,pageHeight:r.height})}else console.log("Erro: currentPageData n\xe3o encontrado")}};return(0,n.jsxs)("div",{className:"h-full flex flex-col",children:[d>0&&(0,n.jsxs)("div",{className:"flex justify-between items-center mb-4 p-3 bg-white/5 backdrop-blur-md rounded-xl",children:[(0,n.jsx)("div",{className:"flex items-center space-x-2",children:(0,n.jsx)("span",{className:"text-white text-sm font-medium",children:p?"".concat(p.name," - P\xe1gina ").concat(i):"Nenhum documento selecionado"})}),(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-1 bg-white/10 rounded-lg p-1",children:[(0,n.jsx)("button",{onClick:()=>k(Math.max(.3,y-.1)),className:"px-2 py-1 text-white hover:bg-white/20 rounded text-sm transition-colors",disabled:y<=.3,children:"-"}),(0,n.jsxs)("span",{className:"px-2 py-1 text-white text-sm min-w-[3rem] text-center",children:[Math.round(100*y),"%"]}),(0,n.jsx)("button",{onClick:()=>k(Math.min(3,y+.1)),className:"px-2 py-1 text-white hover:bg-white/20 rounded text-sm transition-colors",disabled:y>=3,children:"+"}),(0,n.jsx)("button",{onClick:()=>k(1),className:"px-2 py-1 text-white hover:bg-white/20 rounded text-sm transition-colors",children:"Reset"})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-1 bg-white/10 rounded-lg p-1",children:[(0,n.jsx)("button",{onClick:()=>c(Math.max(1,i-1)),className:"px-2 py-1 text-white hover:bg-white/20 rounded text-sm transition-colors",disabled:i<=1,children:"←"}),(0,n.jsxs)("span",{className:"px-2 py-1 text-white text-sm min-w-[3rem] text-center",children:[i,"/",d]}),(0,n.jsx)("button",{onClick:()=>c(Math.min(d,i+1)),className:"px-2 py-1 text-white hover:bg-white/20 rounded text-sm transition-colors",disabled:i>=d,children:"→"})]})]})]}),(0,n.jsx)("div",{className:"flex-grow overflow-auto",children:(()=>{if(0===t.length)return(0,n.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,n.jsx)("p",{className:"text-gray-500",children:"Nenhum documento carregado"})});if(!p)return(0,n.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,n.jsx)("p",{className:"text-gray-500",children:"Selecione uma p\xe1gina para visualizar"})});let e=i-1,s=p.pages[e];return(0,n.jsx)("div",{className:"flex flex-col items-center p-4",children:(0,n.jsxs)("div",{className:"relative bg-white shadow-lg rounded-lg overflow-hidden max-w-full",children:[(0,n.jsx)(x.Z,{file:p.file,onLoadSuccess:e=>{let{numPages:t}=e},onLoadError:e=>{console.error("Erro ao carregar PDF:",e)},children:(0,n.jsx)(h.Z,{pageNumber:i,width:Math.min(800*y,.7*window.innerWidth),renderTextLayer:!0,renderAnnotationLayer:!1})}),(0,n.jsx)("div",{className:"absolute inset-0 cursor-pointer",onClick:A,style:{backgroundColor:"transparent",zIndex:10}}),s&&s.textAnnotations.map(e=>(0,n.jsx)("div",{className:"absolute border border-blue-300 bg-blue-50 bg-opacity-50 rounded p-1 cursor-pointer",style:{left:"".concat(e.x/s.width*Math.min(800*y,.7*window.innerWidth),"px"),top:"".concat(e.y/s.height*Math.min(800*y,.7*window.innerWidth),"px"),width:"".concat(e.width/s.width*Math.min(800*y,.7*window.innerWidth),"px"),height:"".concat(e.height/s.height*Math.min(800*y,.7*window.innerWidth),"px"),fontSize:"".concat((e.fontSize||12)*y,"px"),fontFamily:e.fontFamily||"Arial",color:e.color||"#000000",zIndex:20},onClick:t=>{t.stopPropagation(),F(e)},children:e.content},e.id)),j&&w&&(0,n.jsx)("div",{className:"absolute z-30",style:{left:"".concat(w.screenX,"px"),top:"".concat(w.screenY,"px")},children:(0,n.jsx)(u,{annotation:{id:"new-annotation",content:"",x:w.x,y:w.y,width:200,height:30,fontSize:12,fontFamily:"Arial",color:"#000000"},onSave:S,onCancel:()=>{b(!1),N(null)},onDelete:()=>{b(!1),N(null)},currentTool:a})}),f&&(0,n.jsx)("div",{className:"absolute",style:{left:"".concat(f.x/s.width*Math.min(800*y,.7*window.innerWidth),"px"),top:"".concat(f.y/s.height*Math.min(800*y,.7*window.innerWidth),"px")},children:(0,n.jsx)(u,{annotation:f,onSave:M,onCancel:()=>v(null),onDelete:E})}),C&&P&&(0,n.jsx)("div",{className:"absolute z-40",style:{left:"".concat(P.x,"px"),top:"".concat(P.y,"px"),width:"".concat(Math.max(P.width,200),"px")},children:(0,n.jsxs)("div",{className:"bg-white border-2 border-red-500 rounded-lg shadow-lg p-3",children:[(0,n.jsx)("div",{className:"text-xs text-gray-600 mb-2",children:"Editando texto do PDF:"}),(0,n.jsx)("input",{type:"text",defaultValue:P.text,className:"w-full p-2 border border-gray-300 rounded text-sm mb-2",autoFocus:!0,onKeyDown:e=>{"Enter"===e.key?(console.log("Texto editado:",e.currentTarget.value),D(!1),L(null)):"Escape"===e.key&&(D(!1),L(null))}}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("button",{onClick:()=>{D(!1),L(null)},className:"px-3 py-1 bg-gray-500 text-white text-xs rounded hover:bg-gray-600",children:"Cancelar (Esc)"}),(0,n.jsx)("div",{className:"text-xs text-gray-500",children:"Enter para salvar • Esc para cancelar"})]})]})})]})})})()})]})}function p(e){let{documents:t,selectedPageIndex:a,onSelectPage:r,onDocumentsUpdate:o}=e,[i,c]=(0,s.useState)(null),[d,x]=(0,s.useState)(null),h=(e,t)=>{c({docIndex:e,pageIndex:t})},u=e=>{e.preventDefault()},m=(e,a)=>{if(!i)return;let{docIndex:n,pageIndex:s}=i;if(n===e){let e=[...t],r=e[n],i=l.reorderPages(r,s,a);e[n]=i,o(e)}else{let r=[...t],i=r[n],c=r[e],{sourceDocument:d,targetDocument:x}=l.movePageBetweenDocuments(i,c,s,a);r[n]=d,r[e]=x,o(r)}c(null)},p=(e,a)=>{let n=[...t],s=n[e],r=l.rotatePage(s,a,90);n[e]=r,o(n)},g=(e,a)=>{if(confirm("Tem certeza que deseja excluir esta p\xe1gina?")){let n=[...t],s=n[e],r=l.removePage(s,a);n[e]=r,o(n)}};return 0===t.length?(0,n.jsx)("div",{className:"text-center p-4 border border-gray-200 rounded-lg",children:(0,n.jsx)("p",{className:"text-gray-500",children:"Nenhum documento carregado"})}):(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("h3",{className:"font-medium text-lg",children:"Documentos"}),t.map((e,s)=>(0,n.jsxs)("div",{className:"border border-gray-200 rounded-lg p-2",children:[(0,n.jsx)("h4",{className:"font-medium truncate mb-2",children:e.name}),(0,n.jsx)("div",{className:"grid grid-cols-2 gap-2",children:e.pages.map((o,i)=>{let l=0;for(let e=0;e<s;e++)l+=t[e].pages.length;l+=i;let c=(null==d?void 0:d.docIndex)===s&&(null==d?void 0:d.pageIndex)===i,f=a===l;return(0,n.jsxs)("div",{className:"relative border rounded-md p-1 cursor-pointer group transition-all ".concat(f?"border-blue-500 ring-2 ring-blue-200":"border-gray-300 hover:border-blue-400"),onClick:()=>r(l),draggable:!0,onDragStart:()=>h(s,i),onDragOver:u,onDrop:()=>m(s,i),onMouseEnter:()=>x({docIndex:s,pageIndex:i}),onMouseLeave:()=>x(null),children:[(0,n.jsxs)("div",{className:"aspect-[3/4] bg-gray-100 flex items-center justify-center relative overflow-hidden",children:[(0,n.jsx)("div",{className:"w-full h-full flex items-center justify-center",style:{transform:"rotate(".concat(o.rotation,"deg)"),transition:"transform 0.3s ease"},children:(0,n.jsxs)("span",{className:"text-xs text-gray-500",children:["P\xe1gina ",i+1]})}),0!==o.rotation&&(0,n.jsxs)("div",{className:"absolute top-1 left-1 bg-blue-500 text-white text-xs px-1 rounded",children:[o.rotation,"\xb0"]})]}),(c||f)&&(0,n.jsxs)("div",{className:"absolute top-1 right-1 flex space-x-1",children:[(0,n.jsx)("button",{onClick:e=>{e.stopPropagation(),p(s,i)},className:"bg-white p-1 rounded-full shadow-sm hover:bg-gray-100 transition-colors",title:"Rotacionar 90\xb0",children:(0,n.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),(0,n.jsx)("button",{onClick:e=>{e.stopPropagation(),g(s,i)},className:"bg-white p-1 rounded-full shadow-sm hover:bg-red-100 transition-colors",title:"Excluir p\xe1gina",children:(0,n.jsx)("svg",{className:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),o.textAnnotations.length>0&&(0,n.jsxs)("div",{className:"absolute bottom-1 left-1 bg-green-500 text-white text-xs px-1 rounded",children:[o.textAnnotations.length," anota\xe7\xe3o",o.textAnnotations.length>1?"\xf5es":""]})]},"".concat(e.id,"-page-").concat(i))})})]},e.id))]})}function g(e){let{currentTool:t,onToolChange:a}=e;return(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("div",{className:"flex flex-wrap gap-3",children:[{id:"select",name:"Selecionar",icon:"M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11",description:"Selecionar e editar anota\xe7\xf5es"},{id:"text",name:"Adicionar Texto",icon:"M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7M18 9l-4-4m0 0L8 9m6-4v12",description:"Adicionar nova anota\xe7\xe3o de texto"},{id:"edit",name:"Editar Texto",icon:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z",description:"Editar texto existente no PDF"}].map(e=>(0,n.jsxs)("button",{className:"toolbox-btn flex items-center space-x-2 ".concat(t===e.id?"active":""),onClick:()=>a(e.id),title:e.description,children:[(0,n.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:e.icon})}),(0,n.jsx)("span",{className:"text-sm font-medium",children:e.name})]},e.id))}),(0,n.jsxs)("div",{className:"text-sm text-white/70",children:["select"===t&&(0,n.jsx)("p",{children:"Clique em uma anota\xe7\xe3o para edit\xe1-la ou exclu\xed-la."}),"text"===t&&(0,n.jsx)("p",{children:"Clique em qualquer lugar da p\xe1gina para adicionar uma nova anota\xe7\xe3o de texto."}),"edit"===t&&(0,n.jsx)("p",{children:"Clique diretamente no texto do PDF para edit\xe1-lo."})]})]})}function f(){let[e,t]=(0,s.useState)([]),[a,i]=(0,s.useState)("select"),[d,x]=(0,s.useState)(null),h=async()=>{if(0===e.length){alert("Nenhum documento carregado para unir.");return}try{let t=document.createElement("div");t.innerHTML='\n        <div style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); \n                    background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 20px rgba(0,0,0,0.3);\n                    z-index: 9999; text-align: center;">\n          <div style="margin-bottom: 10px;">\n            <div style="width: 40px; height: 40px; border: 4px solid #f3f3f3; border-top: 4px solid #3498db; \n                        border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto;"></div>\n          </div>\n          <p style="margin: 0; color: #333;">Unindo PDFs...</p>\n        </div>\n        <style>\n          @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }\n        </style>\n      ',document.body.appendChild(t);let a=await l.generatePDF(e);document.body.removeChild(t);let n=new Date().toISOString().slice(0,19).replace(/:/g,"-"),s="documentos-unidos-".concat(n,".pdf");l.downloadPDF(a,s),alert("PDF gerado com sucesso! ".concat(e.length,' documento(s) unido(s) em "').concat(s,'"'))}catch(e){console.error("Erro ao gerar PDF:",e),alert("Erro ao gerar PDF. Verifique se os arquivos est\xe3o v\xe1lidos e tente novamente.")}};return(0,n.jsxs)("div",{className:"min-h-screen flex flex-col relative",children:[(0,n.jsx)(r,{documentsCount:e.length}),(0,n.jsx)("main",{className:"container-responsive py-8 flex-grow",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4 sm:gap-6 lg:gap-8",children:[(0,n.jsxs)("aside",{className:"lg:col-span-1 space-y-4 sm:space-y-6",children:[(0,n.jsxs)("div",{className:"card fade-in-up",children:[(0,n.jsx)("div",{className:"card-header",children:(0,n.jsxs)("h3",{className:"text-base font-semibold text-white flex items-center",children:[(0,n.jsx)("svg",{className:"w-4 h-4 mr-2 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Upload de Arquivos"]})}),(0,n.jsx)("div",{className:"card-body",children:(0,n.jsx)(c,{onFilesUploaded:e=>{t(t=>[...t,...e])}})})]}),(0,n.jsxs)("div",{className:"card fade-in-up",children:[(0,n.jsx)("div",{className:"card-header",children:(0,n.jsxs)("h3",{className:"text-base font-semibold text-white flex items-center",children:[(0,n.jsx)("svg",{className:"w-4 h-4 mr-2 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Documentos (",e.length,")"]})}),(0,n.jsx)("div",{className:"card-body",children:(0,n.jsx)(p,{documents:e,selectedPageIndex:d,onSelectPage:x,onDocumentsUpdate:t})})]}),(0,n.jsxs)("div",{className:"card fade-in-up",children:[(0,n.jsx)("div",{className:"card-header",children:(0,n.jsxs)("h3",{className:"text-base font-semibold text-white flex items-center",children:[(0,n.jsx)("svg",{className:"w-4 h-4 mr-2 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Unir PDFs"]})}),(0,n.jsxs)("div",{className:"card-body space-y-4",children:[e.length>0&&(0,n.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[(0,n.jsxs)("div",{className:"flex items-center mb-2",children:[(0,n.jsx)("svg",{className:"w-4 h-4 text-blue-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,n.jsx)("span",{className:"text-sm font-medium text-blue-800",children:"Documentos para Unir"})]}),(0,n.jsxs)("div",{className:"text-xs text-blue-700 space-y-1",children:[e.map((e,t)=>(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"truncate",children:e.name}),(0,n.jsxs)("span",{children:["(",e.pages.length," p\xe1ginas)"]})]},e.id)),(0,n.jsxs)("div",{className:"border-t border-blue-200 pt-1 mt-2 font-medium",children:["Total: ",e.reduce((e,t)=>e+t.pages.length,0)," p\xe1ginas"]})]})]}),(0,n.jsxs)("button",{onClick:h,className:"btn w-full flex items-center justify-center",disabled:0===e.length,children:[(0,n.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),0===e.length?"Nenhum documento":"Unir ".concat(e.length," PDF(s)")]}),0===e.length&&(0,n.jsxs)("div",{className:"text-xs text-gray-500 text-center space-y-2",children:[(0,n.jsx)("p",{children:"Carregue PDFs para poder uni-los"}),(0,n.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded p-2 text-left",children:[(0,n.jsx)("p",{className:"font-medium mb-1",children:"Como usar:"}),(0,n.jsxs)("ul",{className:"space-y-1 text-xs",children:[(0,n.jsx)("li",{children:"• Fa\xe7a upload de m\xfaltiplos PDFs"}),(0,n.jsx)("li",{children:"• Reordene as p\xe1ginas se necess\xe1rio"}),(0,n.jsx)("li",{children:"• Adicione anota\xe7\xf5es de texto"}),(0,n.jsx)("li",{children:'• Clique em "Unir PDFs" para baixar'})]})]})]})]})]})]}),(0,n.jsxs)("div",{className:"lg:col-span-3 space-y-4 sm:space-y-6",children:[(0,n.jsxs)("div",{className:"card fade-in-up",children:[(0,n.jsx)("div",{className:"card-header",children:(0,n.jsxs)("h3",{className:"text-base font-semibold text-white flex items-center",children:[(0,n.jsxs)("svg",{className:"w-4 h-4 mr-2 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Ferramentas de Edi\xe7\xe3o"]})}),(0,n.jsx)("div",{className:"card-body",children:(0,n.jsx)(g,{currentTool:a,onToolChange:i})})]}),(0,n.jsxs)("div",{className:"card fade-in-up",children:[(0,n.jsx)("div",{className:"card-header",children:(0,n.jsxs)("h3",{className:"text-base font-semibold text-white flex items-center",children:[(0,n.jsxs)("svg",{className:"w-4 h-4 mr-2 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Visualizador de PDF"]})}),(0,n.jsx)("div",{className:"card-body",children:(0,n.jsx)(m,{documents:e,currentTool:a,selectedPageIndex:d,onDocumentsUpdate:t})})]})]})]})}),(0,n.jsx)(o,{})]})}d.default.GlobalWorkerOptions.workerSrc="//unpkg.com/pdfjs-dist@".concat(d.default.version,"/build/pdf.worker.min.js")}},function(e){e.O(0,[651,90,971,117,744],function(){return e(e.s=4137)}),_N_E=e.O()}]);